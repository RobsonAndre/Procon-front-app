<!--
  Generated template for the CadastroPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-toolbar>
    <ion-title>
      Cadastro
    </ion-title>
    <ion-buttons start>
      <button ion-button (click)="dismiss()">
        <span ion-text color="primary" showWhen="ios">Cancelar</span>
        <ion-icon name="md-close" showWhen="android,windows"></ion-icon>
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="app">
  <!-- Card -->
  <div class="card-cadastro">
    <div class="container container-cadastro">
      <div class="row">

        <form class="col">

          <div class='row'>
            <div class='input-field col'>
              <input class='validate' type='text' name='nome' id='nome' [(ngModel)]="cadastro.nome" minlength="6" />
              <label for='nome'>Nome</label>
            </div>
          </div>

          <div class='row'>
            <div class='input-field col'>
              <input class='validate' type="text" name='cpf' id='cpf' [(ngModel)]="cadastro.cpf" maxlength="11" oninput="this.value=this.value.slice(0,this.maxLength)"
                onkeydown="return ( event.ctrlKey || event.altKey 
                    || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false) 
                    || (95<event.keyCode && event.keyCode<106)
                    || (event.keyCode==8) || (event.keyCode==9) 
                    || (event.keyCode>34 && event.keyCode<40) 
                    || (event.keyCode==46) )" [ngClass]="{'invalid': cpfValido == false}" />
              <label for='cpf'>CPF</label>
            </div>
          </div>


          <div class='row'>
            <div class='input-field col'>
              <input class='validate' type='email' name='email' id='email' [(ngModel)]="cadastro.email" />
              <label for='email'>E-mail</label>
            </div>
          </div>

          <div class='row'>
            <div class='input-field col'>
              <input class='validate' type='password' name='senha' id='senha' [(ngModel)]="cadastro.senha" maxlength="15" minlength="8"
              />
              <label for='senha'>Senha</label>
            </div>
          </div>

          <div class='row'>
            <div class='input-field col'>
              <input class='validate' type='password' name='senha_validacao' id='senha_validacao' [(ngModel)]="cadastro.senha_validacao"
                maxlength="15" minlength="8" [ngClass]="{'invalid': senhaValida == false}" />
              <label for='senha_validacao'>Confirmação de senha</label>
            </div>
          </div>

          <div class='row'>
            <div class='col'>
              <input class="validate" type="checkbox" id="termo" name="termo" [(ngModel)]="cadastro.termo" />
              <label for="termo">Li e entendi o Termo de Uso e Politica de Privacidade.</label>
            </div>
          </div>
          <div class='row'>
            <div class='col'>
              <ng-container 
              *ngIf="cadastro.nome == undefined
                || cadastro.cpf == undefined
                || cadastro.email == undefined
                || cadastro.senha == undefined
                || cadastro.senha_validacao == undefined
                || cadastro.termo == undefined;
              else formPreenchido">
                <button type='submit' name='btn-cadastro' class='col s12 btn btn waves-effect indigo' (click)="realizaCadastro()" disabled>Cadastrar</button>
              </ng-container>
              <ng-template #formPreenchido>
                <button type='submit' name='btn-cadastro' class='col s12 btn btn waves-effect indigo' (click)="realizaCadastro()">Cadastrar</button>
              </ng-template>
            </div>
          </div>

        </form>

      </div>

    </div>
  </div>

  <!-- /Card -->
</ion-content>